import pandas as pd
from sklearn.model_selection import train_test_split
from sklearn.ensemble import RandomForestClassifier
from sklearn import preprocessing
from sklearn.metrics import accuracy_score

class randomForest():
    def __init__(self, data):
        self.data = pd.DataFrame(data)
        self.treeData = self.data.drop(['url','class'], axis=1)
        self.tree = RandomForestClassifier(n_estimators=1000, min_samples_split=10,min_samples_leaf=4,max_depth=40,bootstrap=True)
        x, y = self.treeData, self.data['class']
        le = preprocessing.LabelEncoder()
        for column in x.columns:
            if x[column].dtype == object:
                x[column] = le.fit_transform(x[column])
        ## 10% za testiranje, 90% za ucenje
        x_train, x_test, y_train, y_test = train_test_split(x, y, test_size = 0.1, random_state=None)
        self.tree = self.tree.fit(x_train, y_train)
        y_pred = self.tree.predict(x_test)
        print("Accuracy: %f" % (accuracy_score(y_test, y_pred)))
