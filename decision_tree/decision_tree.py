from sklearn import tree
from sklearn.model_selection import train_test_split
from sklearn.metrics import accuracy_score
from sklearn import preprocessing
import pandas as pd

class decisionTree():
    def __init__(self, data):
        ## train data
        self.data = pd.DataFrame(data)
        self.treeData = self.data.drop(['url','class'], axis=1)
        self.tree = tree.DecisionTreeClassifier(criterion="entropy", max_depth=5)
        x, y = self.treeData, self.data['class']
        le = preprocessing.LabelEncoder()
        for column in x.columns:
            if x[column].dtype == object:
                x[column] = le.fit_transform(x[column])
        ## 10% za testiranje, 90% za ucenje
        x_train, x_test, y_train, y_test = train_test_split(x, y, test_size = 0.1, random_state=None)
        self.tree = self.tree.fit(x_train, y_train)
        y_pred = self.tree.predict(x_test)
        print("Accuracy: %f" % (accuracy_score(y_test, y_pred)))